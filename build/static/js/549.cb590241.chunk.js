"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[549],{1497:function(e,t,n){var r=n(3383),a=n(2776),o=n(1752),c=n(2622),i=n(9516),s=n(6871),l=n(3504),u=n(511),d=n(184),h=r.Z.Meta;t.Z=function(e){var t=e.img,n=e.title,f=e.desc,g=e.personal,x=e.id,m=e.handleDelete;(0,s.s0)();return(0,d.jsx)(r.Z,{style:{width:"300px"},cover:(0,d.jsx)("img",{style:{width:"300px",height:"300px",objectFit:"cover"},alt:"example",src:u.r.base_url+t}),actions:g?[(0,d.jsx)(l.rU,{to:"/profile/blogs/".concat(x),children:(0,d.jsx)(o.Z,{},"edit")}),(0,d.jsx)(a.Z,{placement:"top",title:"Are you sure to delete this blog",onConfirm:function(){return m(x)},okText:"Yes",cancelText:"No",children:(0,d.jsx)(c.Z,{},"deleted")}),(0,d.jsx)(l.rU,{to:"/blogs/".concat(x),children:(0,d.jsx)(i.Z,{},"more")})]:[(0,d.jsx)(l.rU,{to:"/blogs/".concat(x),children:(0,d.jsx)(i.Z,{},"more")})],children:(0,d.jsx)(h,{title:n,description:(0,d.jsx)("div",{style:{height:"50px",overflow:"hidden"},children:f})})})}},9999:function(e,t,n){n.d(t,{W:function(){return o}});var r,a=n(168),o=n(5751).ZP.div(r||(r=(0,a.Z)(["\n    margin:5px;\n"])))},7482:function(e,t,n){n.d(t,{R:function(){return i}});var r,a,o=n(168),c=n(5751),i=(c.ZP.div(r||(r=(0,o.Z)(["\n    height:300px;\n    margin-bottom:50px;\n"]))),c.ZP.div(a||(a=(0,o.Z)(["\n    width:100%;\n    height:100%;\n\n    & > .empty{\n        margin:auto;\n    }\n"]))))},5549:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r=n(9439),a=n(2791),o=n(6871),c=n(7309),i=n(1413),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},l=n(4291),u=function(e,t){return a.createElement(l.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t,icon:s}))};u.displayName="PlusCircleOutlined";var d=a.forwardRef(u),h=n(3504),f=n(184),g=function(){return(0,f.jsx)(h.rU,{to:"/profile/blogs/create",children:(0,f.jsx)(c.Z,{type:"dashed",icon:(0,f.jsx)(d,{}),className:"create_blog_button",children:"Create a blog"})})},x=n(7711),m=n(2624),p=n(6106),v=n(914),Z=n(9421),j=n(7800),b=n(1933),w=n(5861),y=n(7757),k=n.n(y),C=n(4569),S=n.n(C),_=localStorage.getItem("access_token"),E=localStorage.getItem("refresh_token"),P=function(){var e=(0,w.Z)(k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({method:"DELETE",url:"/blogs/".concat(t),headers:{Authorization:"Bearer ".concat(_),refresh:"".concat(E)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=P,T=n(1497),M=n(9999),B=n(2730),D=n(7482),I=function(e){var t,n,r,a,o,c,i=e.res,s=e.handlePageChange,l=(0,b.useMutation)(z,{onError:function(){(0,B.Z)("error","Something went wrong.Try again!")},onSuccess:function(e){e.data.error?e.data.error&&(0,B.Z)("error","Something went wrong.Try again!"):((0,B.Z)("success","Deleted successfully"),i.refetch())}}),u=l.mutate;l.isLoading;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(p.Z,{children:[0!==i.data.data.data.rows.length?i.data.data.data.rows.map((function(e){return(0,f.jsx)(v.Z,{xs:24,xl:8,xxl:5,md:12,sm:24,lg:8,children:(0,f.jsx)(M.W,{children:(0,f.jsx)(T.Z,{id:e.id,desc:e.short_desc,img:e.photo,title:e.title,personal:!0,handleDelete:function(e){u(e)}})})},e.id)})):(0,f.jsx)(D.R,{children:(0,f.jsx)(Z.Z,{className:"empty"})}),(0,f.jsx)(v.Z,{span:24,children:(0,f.jsx)(j.Z,{onChange:s,defaultPageSize:null===i||void 0===i||null===(t=i.data)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.limit,defaultCurrent:1,total:null===i||void 0===i||null===(a=i.data)||void 0===a||null===(o=a.data)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.count})})]})})},N=function(e,t){var n=localStorage.getItem("access_token"),r=localStorage.getItem("refresh_token");return(0,b.useQuery)("fetch-personal-blogs",(function(){return S()({method:"GET",url:"/blogs?page=".concat(t),headers:{Authorization:"Bearer ".concat(n),refresh:"".concat(r)}})}),{onError:e})},U=function(){var e,t=(0,a.useState)(1),n=(0,r.Z)(t,2),c=n[0],i=n[1],s=(0,o.s0)(),l=N((function(){s("/404")}),c);return(0,a.useEffect)((function(){l.refetch()}),[c]),null!==l&&void 0!==l&&null!==(e=l.data)&&void 0!==e&&e.data?(0,f.jsx)(x.Z,{component:(0,f.jsx)(g,{}),breadcrumb:[{url:"/",name:"Home"},{url:"/profile/blogs",name:"My Blogs"}],children:(0,f.jsx)(I,{handlePageChange:function(e,t){return function(e,t){i(e)}(e)},res:l})}):(0,f.jsx)(m.Z,{})}}}]);
//# sourceMappingURL=549.cb590241.chunk.js.map