"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[626],{1147:function(e,n,t){var r=t(9389),s=t(6106),a=t(914),l=t(7496),o=t(1028),i=t(2791),c=t(184),u=r.Z.TextArea;n.Z=function(e){var n=e.quill,t=e.quillRef,d=e.Quill,h=e.handleMainPhotoChange;return d&&!n&&d.register("modules/blotFormatter",o.ZP),(0,i.useEffect)((function(){n&&n.on("text-change",(function(e,r){console.log("Text change!"),console.log("Salom",t.current.firstChild.innerHTML);var s=n.getContents();console.log(s.diff(r))}))}),[n,d]),(0,c.jsxs)(s.Z,{children:[(0,c.jsx)(a.Z,{xl:24,xs:24,className:"px-3",children:(0,c.jsx)(l.Z.Item,{label:"Photo",children:(0,c.jsx)("input",{type:"file",onChange:function(e){return h(e.target.files)}})})}),(0,c.jsx)(a.Z,{xl:24,xs:24,className:"px-3",children:(0,c.jsx)(l.Z.Item,{label:"Title",name:"title",hasFeedback:!0,rules:[{required:!0,message:"Please input title!"}],children:(0,c.jsx)(r.Z,{})})}),(0,c.jsx)(a.Z,{span:24,children:(0,c.jsx)(l.Z.Item,{label:"Short Description",name:"short_desc",rules:[{required:!0,message:"Please input short description"}],children:(0,c.jsx)(u,{showCount:!0,maxLength:100,style:{height:120}})})}),(0,c.jsx)(a.Z,{span:24,children:(0,c.jsx)(l.Z.Item,{label:"Description",name:"desc",className:"react-quill-container",children:(0,c.jsx)("div",{ref:t})})})]})}},1626:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r=t(7711),s=t(9439),a=t(4327),l=t(7496),o=t(7309),i=t(5507),c=t(2791),u=t(1933),d=t(7215),h=t(6871),f=t(5861),p=t(7757),m=t.n(p),x=t(4569),g=t.n(x),Z=localStorage.getItem("access_token"),j=localStorage.getItem("refresh_token"),b=function(){var e=(0,f.Z)(m().mark((function e(n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()({method:"POST",url:"/blogs",headers:{Authorization:"Bearer ".concat(Z),refresh:"".concat(j)},data:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=b,v=t(1147),y=t(184),q=function(){var e=(0,c.useState)(),n=(0,s.Z)(e,2),t=n[0],r=n[1],f=(0,h.s0)(),p=(0,u.useMutation)(C,{onError:function(){q("error","Something went wrong")},onSuccess:function(e){e.data.error?q("error",e.data.msg):e.data.error||(q("success","You created a blog successfully"),f("/profile/blogs"))}}),m=p.mutate,x=p.isLoading,g=(0,d.p)({modules:{blotFormatter:{}}}),Z=g.quill,j=g.quillRef,b=g.Quill,q=function(e,n){a.Z[e]({message:e,description:n})};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(i.Z,{level:3,children:"Create a blog"}),(0,y.jsxs)(l.Z,{name:"basic",initialValues:{remember:!0},onFinish:function(e){var n=new FormData;n.append("title",e.title),n.append("short_desc",e.short_desc),n.append("photo",t),n.append("description",j.current.firstChild.innerHTML),m(n)},layout:"vertical",onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[(0,y.jsx)(v.Z,{handleMainPhotoChange:function(e){return function(e){r(e[0])}(e)},quill:Z,Quill:b,quillRef:j}),(0,y.jsx)(l.Z.Item,{wrapperCol:{offset:0,span:16},children:(0,y.jsx)(o.Z,{loading:x,type:"primary",htmlType:"submit",children:"Send"})})]})]})},w=function(){return(0,y.jsx)(r.Z,{breadcrumb:[{url:"/",name:"Home"},{url:"/",name:"My blogs"},{url:"#",name:"Create"}],children:(0,y.jsx)(q,{})})}}}]);
//# sourceMappingURL=626.ecef2c8f.chunk.js.map